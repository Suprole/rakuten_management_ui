# 認証設定（Google OAuth2.0 + 許可メール制限）

本WebUIは **Google OAuth2.0** を利用し、**許可したメールアドレスのみ閲覧可能**にします。

## 必要な環境変数

以下をホスティング環境（例: Vercel の Environment Variables）に設定してください。

- `AUTH_SECRET`
  - セッション暗号化用の秘密鍵（十分長いランダム文字列）
- `AUTH_GOOGLE_ID`
  - Google OAuth クライアントID
- `AUTH_GOOGLE_SECRET`
  - Google OAuth クライアントシークレット
- `ALLOWED_EMAILS`
  - 許可メール（カンマ区切り、完全一致）
  - 例: `alice@example.com,bob@example.com`

> `ALLOWED_EMAILS` が未設定（空）の場合は **誰もログインできない**（セキュア側に倒す）挙動です。

## Google Cloud Console 側の設定

1. Google Cloud Console でプロジェクト作成
2. OAuth 同意画面を設定（内部/外部は運用方針に合わせる）
3. OAuth クライアントID（Webアプリ）を作成
4. 承認済みリダイレクトURIに以下を追加
   - ローカル: `http://localhost:3000/api/auth/callback/google`
   - 本番: `https://<YOUR_DOMAIN>/api/auth/callback/google`

## 実装上のポイント

- 認証設定本体: `auth.ts`
- NextAuth ルート: `app/api/auth/[...nextauth]/route.ts`
- 画面保護: `middleware.ts`
- ログイン画面: `app/login/page.tsx`


