(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var s=e.i(43476),t=e.i(71645);function a(){let[e,a]=(0,t.useState)([]),[l,r]=(0,t.useState)(!0),[c,d]=(0,t.useState)(null),[x,n]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{try{r(!0),d(null);let e=await fetch("/api/products");if(!e.ok)throw Error(`${e.status} ${e.statusText}`);let s=await e.json();a(s.products??[])}catch(e){d(e instanceof Error?e.message:"unknown error")}finally{r(!1)}})()},[]);let i=(0,t.useMemo)(()=>x?"商品詳細":"商品一覧",[x]);return(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsx)("header",{className:"border-b",children:(0,s.jsxs)("div",{className:"mx-auto max-w-6xl px-4 py-4",children:[(0,s.jsx)("h1",{className:"text-xl font-bold",children:"楽天市場 商品可視化ダッシュボード"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:i})]})}),(0,s.jsxs)("main",{className:"mx-auto max-w-6xl px-4 py-6",children:[l&&(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"読み込み中..."}),c&&(0,s.jsxs)("div",{className:"text-sm text-red-600",children:["エラー: ",c]}),!l&&!c&&!x&&(0,s.jsx)("div",{className:"overflow-x-auto rounded border",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-3 py-2 text-left",children:"商品管理番号"}),(0,s.jsx)("th",{className:"px-3 py-2 text-left",children:"代表SKU"}),(0,s.jsx)("th",{className:"px-3 py-2 text-left",children:"評価"}),(0,s.jsx)("th",{className:"px-3 py-2 text-left",children:"商品名"}),(0,s.jsx)("th",{className:"px-3 py-2 text-right",children:"在庫"}),(0,s.jsx)("th",{className:"px-3 py-2 text-right",children:"今月売上個数"}),(0,s.jsx)("th",{className:"px-3 py-2 text-right",children:"今月アクセス"}),(0,s.jsx)("th",{className:"px-3 py-2 text-right",children:"今月CV"}),(0,s.jsx)("th",{className:"px-3 py-2 text-left",children:"バッジ"})]})}),(0,s.jsx)("tbody",{children:e.map(e=>(0,s.jsxs)("tr",{className:"border-t hover:bg-gray-50 cursor-pointer",onClick:()=>n(e),children:[(0,s.jsx)("td",{className:"px-3 py-2 font-mono",children:e.product_code}),(0,s.jsx)("td",{className:"px-3 py-2 font-mono text-gray-600",children:e.representative_sku}),(0,s.jsx)("td",{className:"px-3 py-2",children:e.rating??""}),(0,s.jsx)("td",{className:"px-3 py-2 max-w-[420px] truncate",children:e.product_name}),(0,s.jsx)("td",{className:"px-3 py-2 text-right",children:e.stock_sum.toLocaleString()}),(0,s.jsx)("td",{className:"px-3 py-2 text-right",children:e.sales_units_m.toLocaleString()}),(0,s.jsx)("td",{className:"px-3 py-2 text-right",children:e.access_m.toLocaleString()}),(0,s.jsxs)("td",{className:"px-3 py-2 text-right",children:[e.cv_m.toFixed(2),"%"]}),(0,s.jsx)("td",{className:"px-3 py-2",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.badges.slice(0,3).map((e,t)=>(0,s.jsx)("span",{className:"rounded border px-2 py-0.5 text-xs",children:e},t)),e.badges.length>3&&(0,s.jsxs)("span",{className:"rounded border px-2 py-0.5 text-xs",children:["+",e.badges.length-3]})]})})]},e.product_code))})]})}),!l&&!c&&x&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("button",{className:"rounded border px-3 py-2 text-sm",onClick:()=>n(null),children:"戻る"}),(0,s.jsxs)("div",{className:"rounded border p-4",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["商品管理番号: ",(0,s.jsx)("span",{className:"font-mono",children:x.product_code})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["代表SKU: ",(0,s.jsx)("span",{className:"font-mono",children:x.representative_sku})]}),(0,s.jsx)("h2",{className:"mt-3 text-lg font-bold",children:x.product_name}),(0,s.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2 text-sm",children:[(0,s.jsxs)("div",{className:"rounded border px-3 py-2",children:["在庫: ",x.stock_sum]}),(0,s.jsxs)("div",{className:"rounded border px-3 py-2",children:["今月売上: ",x.sales_units_m]}),(0,s.jsxs)("div",{className:"rounded border px-3 py-2",children:["今月アクセス: ",x.access_m]}),(0,s.jsxs)("div",{className:"rounded border px-3 py-2",children:["今月CV: ",x.cv_m.toFixed(2),"%"]})]})]})]})]})]})}e.s(["default",()=>a])}]);